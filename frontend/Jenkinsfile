pipeline {
    agent any


    
    stages {
              stage('Check Docker Version') {
            steps {
                script {
                    def dockerToolInstallation = tool name: 'Docker', type: 'ToolType'
                    def dockerVersionOutput = sh(script: "${dockerToolInstallation}/docker --version", returnStdout: true).trim()
                    echo "Docker Version: ${dockerVersionOutput}"
                }
            }
              }
        stage('Clone Repository') {
            steps {
                script {
                    // Cloning a Git repository with options
                    def gitOptions = [
                        credentialsId: 'PAT', // Optional: Use specific credentials from Jenkins
                        url: 'https://github.com/Yummy12345678/gatsby-testing.git',
                        branch: 'main', // Optional: Specify a specific branch
                        changelog: true // Optional: Include changelog in build
                    ]
                    git gitOptions
                }
            }
        }
        stage('Package') {
          agent {
            docker {
              image 'postgres:13-apline'
              reuseNode true
            }
          }
          steps {
                dir('frontend') {
                    // Build Docker image
                    sh 'docker build -t gatsby-container .'
                    
               
                }
          }
        }
    }
}
